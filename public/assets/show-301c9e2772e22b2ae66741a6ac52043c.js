//This is mostly copy and pasted from 'grades.js.erb'
$("#show").ready(function(){function a(){$.ajax({type:"GET",async:!1,url:"/grades/"+location.pathname.split("/")[2]+".json",success:function(a){grade=a,$("#custom_score_input").val(grade.score)}})}function b(){grade.graded&&grade.score!=null&&(c(),grade.score*2==grade.assignment.score?$("#half").addClass("half_active"):grade.score==grade.assignment.score?$("#full").addClass("full_active"):grade.score==0?$("#none").addClass("none_active"):grade.score&&$("#custom_score").addClass("custom_score_active"),k()&&$("#note").addClass("note_active"))}function c(){$("#note").removeClass("note_active"),$("#none").removeClass("none_active"),$("#half").removeClass("half_active"),$("#full").removeClass("full_active"),$("#custom_score").removeClass("custom_score_active")}function d(){doc=scribd.Document.getDoc(grade.document_id,grade.document_access_key),doc.addParam("jsapi_version",1),doc.addParam("hide_disabled_buttons",!0),doc.write("scribd"),$("#scribd").children("embed").attr("height",window.innerHeight*.6),b()}function e(a){$("#custom_score_input").val(grade.assignment.score*a),b(),g()}function f(){$("#custom_score_input").css("width","50px"),$("#custom_score_popup").dialog({width:"300px",buttons:{"Save Score":function(){g(),$(this).dialog("close")}}})}function g(){$("#none").hasClass("clickable")&&(grade.score=parseInt($("#custom_score_input").val()),h(),b(),i())}function h(){$.ajax({url:"/grades/"+location.pathname.split("/")[2],data:{grade:{score:grade.score,graded:!0,note:grade.note}},type:"PUT"})}function i(){grade.score||grade.score==0?$("#status").text("Score: "+grade.score+" out of "+parseInt(grade.assignment.score).toString()):$("#status").text("Score: Not Graded Yet")}function j(){grade.note&&grade.note!="null"&&grade.note!=""?($("#why").show(),$("#separator").show(),$("#why").text(grade.note)):($("#separator").hide(),$("#why").hide())}function k(){return grade.note=="null"||grade.note==""||grade.note==undefined?!1:!0}function l(){($("#notes").text()=="null"||$("#notes").val()=="null")&&$("#notes").val("No Notes Given"),$("#notes").css("font-size","12pt"),$("#notes").css("width","450px"),$("#note_container").css("overflow","none"),$("#notes").css("resize","none"),$("#notes").hasClass("teacher")?($("#notes").val(grade.note),grade.note=="null"&&$("#notes").val("No notes given"),$("#note_container").dialog({width:"500px",buttons:{"Update Note":function(){grade.note=$("#notes").val(),j(),h(),b(),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})):$("#notes").hasClass("student")&&($("#notes").text("Notes: No notes given"),$("#note_container").dialog({width:"500px"}))}grade=null,a(),d(),$("#why").click(function(){l()}),$("#note").click(function(){l()}),$(".clickable").mouseenter(function(){$(this).attr("id")=="none"&&$(this).children("img").css("box-shadow","0px 0px 5px #A90000"),$(this).attr("id")=="half"&&$(this).css("box-shadow","0px 0px 5px #BAB600"),$(this).attr("id")=="full"&&$(this).children("img").css("box-shadow","0px 0px 5px #9DD20D")}),$(".clickable").mouseout(function(){$(this).attr("id")=="none"&&$(this).children("img").attr("style",""),$(this).attr("id")=="half"&&$(this).attr("style",""),$(this).attr("id")=="full"&&$(this).children("img").attr("style","")}),$(window).resize(function(){$("#scribd").children("embed").attr("height",window.innerHeight*.6)}),$("#full").click(function(){e(1)}),$("#half").click(function(){e(.5)}),$("#none").click(function(){e(0)}),$("#custom_score").click(function(){f()})})